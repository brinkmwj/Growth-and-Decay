{"title":"Feint Games","scrolling":true,"loadflow":"","init":"\n$('body').addClass('textured');$('.button').pretouch();if(!OF.menu){OF.menu=function(buttonName){if(buttonName=='home')OF.menu.home();else if(buttonName=='settings')OF.menu.settings();else if(buttonName=='exit')OF.menu.exit();else{OF.log('Unknown menu button hit: '+buttonName);}};OF.menu.home=function(){if(OF.navigationStack[0].url.match(/dashboard\\/user/)){OF.goBack({root:true});}else{OF.navigateToUrl(\"dashboard/user\",{complete:function(){OF.pages.unshift(OF.pages.pop());OF.action('back',{root:true},OF.contentLoaded);}});}};OF.menu.settings=function(){OF.sendAction('openSettings');};OF.menu.exit=function(){OF.sendAction('dismiss');};}\nif(!OF.friendsList){OF.friendsList={init:function(){$.lazyLoad({threshold:0.5,nextPageLoaded:function(page,data){if(page==1){OF.friendsList.renderFriends(data);}else{OF.friendsList.addFriends(data);}},nextPageShouldLoad:function(page,callback){OF.api.request('/xp/friends',{params:{user_id:OF.page.user.id,page:page,page_size:50},success:function(data){callback(data.users,data.users.length<50)},failure:function(){callback([]);}});},isEmpty:function(){OF.friendsList.renderFriends([]);},isFinished:function(){$(\"#loading\").hide();}});},renderFriendItems:function(friends){var html=$.map(friends,function(friend){return tmpl('user_tmpl',friend);});return html;},renderFriends:function(friends){var html=OF.friendsList.renderFriendItems(friends);if(html.length>0){$('#friends_list > ul').html(html.join('')).unhide();$(\"#friends_list .no_data\").hide();}else{$('#friends_list > ul').hide();$(\"#friends_list .no_data\").unhide();}},addFriends:function(friends){var html=OF.friendsList.renderFriendItems(friends);$('#friends_list > ul').append(html.join(''));}};}\n$('#home_button').touch(OF.menu.home);var userID=OF.page.params.user_id||OF.user.id;var gameTmpl=tmpl('game_tmpl');$('.game_cell').touch(function(){var isLocalUser=OF.page.params.user_id==OF.user.id;var game=OF.page.games[parseInt($(this).attr('data-game_index'))].game;if(game.id=='32334'||!isLocalUser){OF.push('dashboard/game',{params:{game:game}});}else{if(game.platforms.indexOf('android')!=-1){OF.push('dashboard/local_game',{params:{game:game}});}else{alert(\"The developer of this game has not yet setup all the information for this screen\");}}});var sendGamesRequest=function(from){(OF.page.params.user_id==OF.user.id)?sectionTitle=\"Your Games\":sectionTitle=OF.page.params.user_name+\"'s Games\";OF.api.request('/xp/users/'+userID+'/games',{loader:'li.loading',success:function(data){$('.section_title').text(sectionTitle);OF.page.games=data.games;var html='';if(OF.page.games.length>0){$.each(OF.page.games,function(i){this.game.index=i;html+=gameTmpl(this.game);});$('#game_list').show().append(html).unhide();}else{$('ul#game_list').append($('#no_games').html()).unhide();}}});}\nif(typeof OF.page.params.user_name==='undefined'){OF.api.request('/xp/users/'+userID,{success:function(data){OF.page.params.user_name=data.user.name;sendGamesRequest();}});}else{sendGamesRequest();}","resume":"","appear":"\n$('#header .title').html(OF.page.title);","html":"<div id='dashboard'>\n<div id='header'>\n<span class='loading'>\n<span class='spinner'></span>\n</span>\n<div class='title' id='home_button'></div>\n</div>\n          <script type=\"text/plain\" id=\"game_tmpl\">\n            <% var icon_url = OF.deviceType.Android ? android_icon_url : ios_icon_url; %>\n<% var style = null; %>\n<% if(icon_url){  style = \"background-image: url(\" + icon_url + \")\"; } %>\n\n<li class=\"game_cell one_line\" data-game_index=\"<%= index %>\">\n  <div class=\"icon\" style=\"<%= style  %>\"></div>\n  <div class=\"title\"><%= name %></div>\n</li>\n          </script>\n          <script type=\"text/plain\" id=\"no_games\">\n            <li class=\"no_data\">This user doesn't have any Android compatible Feint Games.</li>\n          </script>\n<div id='games'>\n<ul class='cells'>\n<li class='section_title'></li>\n</ul>\n<ul class='cells' id='game_list'>\n<li class='loading'>\n<div class='spinner'></div>\n</li>\n</ul>\n</div>\n\n</div>\n"}